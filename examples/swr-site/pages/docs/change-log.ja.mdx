import Markdown from 'markdown-to-jsx'
import { useSSG } from 'nextra/ssg'

export const getStaticProps = ({ params }) => {
  return { props: { ssg: [{
    body: 'This is a new release with some new features and bug fixes.',
    html_url: 'https://example.com',
    published_at: '2020-01-01',
    tag_name: 'v0.1.0'
  }] }, revalidate: 10 }
}

export const ReleasesRenderer = () => {
  const releases = useSSG()
  return <Markdown>{
    releases.map(release => {
      const body = release.body
        .replace(/&#39;/g, "'")
        .replace(/@([a-zA-Z0-9_-]+)(?=(,| ))/g, '<a href="https://github.com/$1" target="_blank" rel="noopener">@$1</a>')
      return `## <a href="${release.html_url}" target="_blank" rel="noopener">${release.tag_name}</a> 
${new Date(release.published_at) .toDateString()} に公開\n\n${body}`}).join('\n\n')
  }</Markdown>
}

# 変更履歴

すべてのリリース履歴については、 [SWR のリリースページ](https://github.com/vercel/swr/releases) にアクセスしてください。

<ReleasesRenderer/>
